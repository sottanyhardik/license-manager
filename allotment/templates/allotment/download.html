{% extends "pdf_base.html" %}
{% load humanize %}
{% block extra_style %}

    <style type="text/css">
        @page {
            size: A4 landscape;
            margin: 1cm;
        }


        .table th,
        .table td {
            padding: 1px;
            vertical-align: top;
            border: 1px solid #000;
            text-align: center;
        }

        .table thead th {
            vertical-align: bottom;
            border-bottom: 2px solid #000;
        }

        .table tbody + tbody {
            border-top: 2px solid #000;
        }

        .table .table {
            background-color: #fff;
        }

        .list-group {
            display: block;
            width: 100%;
            list-style: none;
            margin-top: 15px;
            margin-bottom: 15px;
        }

        .list-group p {
            width: 100%;
            height: 18px;
            line-height: 20px;
            list-style: none;
            font-size: 1.1em;
        }
    </style>
{% endblock %}

{% block content %}
    <h3>Pending Allotment</h3>
    <table class="table table-bordered">
        <thead>
        <th>Sr No</th>
        <th>Allotment Date</th>
        <th>Importer</th>
        <th>Quantity (KGS)</th>
        <th>Unit Price ($)</th>
        <th>Value ($)</th>
        <th>Item Name</th>
        <th>Invoice</th>
        <th>ETA</th>
        <th>DFIA No.</th>
        <th>DFIA Qty.</th>
        <th>DFIA $.</th>
        </thead>
        <tbody>
        {% for allotment in object_list %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ allotment.modified_on }}</td>
                <td>{{ allotment.company }}</td>
                <td>{{ allotment.required_quantity }}</td>
                <td>{{ allotment.unit_value_per_unit }}</td>
                <td>{{ allotment.required_value }}</td>
                <td>{{ allotment.item_name }}</td>
                <td>{% if allotment.invoice %}{{ allotment.invoice }}{% else %}-{% endif %}</td>
                <td>{% if allotment.eta %}{{ allotment.eta }}{% else %}-{% endif %}</td>
                <td colspan="3">
                    <table>
                        {% for allotment_detail in allotment.allotment_details.all %}
                            <tr>
                                <td>{{ allotment_detail.item.license }}</td>
                                <td>{{ allotment_detail.qty }}</td>
                                <td>{{ allotment_detail.cif_fc }}</td>
                            </tr>
                        {% endfor %}
                        <tr>
                            <td><b>Total</b></td>
                            <td>{{ allotment.alloted_quantity }}</td>
                            <td>{{ allotment.alloted_value }}</td>
                        </tr>
                    </table>
                </td>
            </tr>
        {% endfor %}
        <tr>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td><b>Total USD $</b></td>
            <td><b>{{ total_cif }}</b></td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
            <td> </td>
        </tr>
        </tbody>
    </table>
{% endblock %}