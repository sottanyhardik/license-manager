{% extends "pdf_base.html" %}

{% block extra_style %}
<style type="text/css">
    @page {
        size: A4 landscape;
        margin: 1cm;
    }
    .table th, .table td {
        padding: 1px;
        vertical-align: top;
        border: 1px solid #000;
        text-align: center;
    }
    .table thead th {
        vertical-align: bottom;
        border-bottom: 2px solid #000;
    }
    .table tbody + tbody {
        border-top: 2px solid #000;
    }
    .list-group {
        display: block;
        width: 100%;
        list-style: none;
        margin-top: 15px;
        margin-bottom: 15px;
    }
    .list-group p {
        width: 100%;
        height: 18px;
        line-height: 20px;
        font-size: 1.1em;
    }
</style>
{% endblock %}

{% block content %}
<table class="table table-bordered table-striped tbordered">
    <thead>
        <tr>
            <th><h3>License Number</h3></th>
            <th><h3>License Date</h3></th>
            <th><h3>License Expiry</h3></th>
            <th><h3>File Number</h3></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{ object.license_number|default:'' }}</td>
            <td>{{ object.license_date|default:'' }}</td>
            <td>{{ object.license_expiry_date|default:'' }}</td>
            <td>{{ object.file_number|default:'' }}</td>
        </tr>
    </tbody>

    <thead>
        <tr>
            <th><h3>Exporter</h3></th>
            <th><h3>Notification</h3></th>
            <th><h3>Scheme Code</h3></th>
            <th><h3>Port</h3></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{ object.exporter|default:'' }}</td>
            <td>{{ object.get_notification_number_display|default:'' }}</td>
            <td>{{ object.get_scheme_code_display|default:'' }}</td>
            <td>{{ object.port|default:'' }}</td>
        </tr>
    </tbody>
</table>

<h3>Export Items</h3>
<table class="table table-bordered table-striped tbordered">
    <thead>
        <tr>
            <th>Item</th>
            <th>Total CIF</th>
            <th>Balance CIF</th>
        </tr>
    </thead>
    <tbody>
        {% for export_item in object.export_license.all %}
        <tr>
            <td>{{ export_item.item|default:'' }}</td>
            <td>{{ export_item.cif_fc }}</td>
            <td>{{ export_item.balance_cif_fc }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3>Import Items</h3>
{% for import_item in object.import_license.all %}
    <table style="margin-top:20px; margin-bottom:5px;" class="table table-bordered table-striped tbordered">
        <thead>
            <tr>
                <th>Sr No</th>
                <th>Product Description</th>
                <th>HS Code</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ import_item.serial_number|default:'' }}</td>
                <td>{{ import_item.item|default:'' }}</td>
                <td>{{ import_item.hs_code|default:' ' }}</td>
            </tr>
        </tbody>
    </table>

    <table class="table table-bordered table-striped tbordered">
        <thead>
            <tr>
                <th style="width: 10%">Date</th>
                <th style="width: 10%">Type</th>
                <th style="width: 10%">BILL OF ENTRY</th>
                <th style="width: 10%">BILL Details</th>
                <th style="width: 10%">Quantity</th>
                <th style="width: 10%">CIF FC</th>
                <th style="width: 10%">CIF INR</th>
                <th style="width: 40%">Company</th>
            </tr>
        </thead>
        <tbody>
            {% for item in import_item.item_details.all %}
            <tr>
                <td>{{ item.bill_of_entry.bill_of_entry_date|default:'' }}</td>
                <td>{{ item.get_transaction_type_display|title }}</td>
                <td>{{ item.bill_of_entry|default:'' }}</td>
                <td>{{ item.bill_of_entry.invoice_no|default:' ' }}</td>
                <td>{{ item.qty }}</td>
                <td>{{ item.cif_fc }}</td>
                <td>{{ item.cif_inr }}</td>
                <td>{{ item.bill_of_entry.company|title }}</td>
            </tr>
            {% endfor %}

            {% for item in import_item.allotment_details.all %}
                {% if not item.allotment.bill_of_entry.all.exists %}
                <tr>
                    <td>{{ item.allotment.modified_on }}</td>
                    <td> </td>
                    <td>Allotment</td>
                    <td> </td>
                    <td>{{ item.qty }}</td>
                    <td>{{ item.cif_fc }}</td>
                    <td>{{ item.cif_inr }}</td>
                    <td>{{ item.allotment.company }}</td>
                </tr>
                {% endif %}
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td colspan="4"></td>
                <td><b>{{ import_item.balance_quantity }}</b></td>
                <td colspan="3"></td>
            </tr>
        </tfoot>
    </table>
{% endfor %}
{% endblock %}
