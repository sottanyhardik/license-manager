{% extends "pdf_base.html" %}
{% load app_tags %}
{% load humanize %}
{% block extra_style %}

    <style type="text/css">
        @page {
            size: A4 landscape;
            margin: 1cm;
        }


        .table th,
        .table td {
            padding: 1px;
            vertical-align: top;
            border: 1px solid #000;
            text-align: center;
        }

        .table thead th {
            vertical-align: bottom;
            border-bottom: 2px solid #000;
        }

        .table tbody + tbody {
            border-top: 2px solid #000;
        }

        .table .table {
            background-color: #fff;
        }

        .list-group {
            display: block;
            width: 100%;
            list-style: none;
            margin-top: 15px;
            margin-bottom: 15px;
        }

        .list-group p {
            width: 100%;
            height: 18px;
            line-height: 20px;
            list-style: none;
            font-size: 1.1em;
        }
    </style>
{% endblock %}

{% block content %}
    <table>
        <tr>
            <td colspan="4"><h3>Pending Bills</h3></td>
            <td><b>{{ today }}</b></td>
        </tr>
    </table>
    {% regroup object_list by company as company %}
    {% for data in company %}
        <h4>{{ data.grouper }}</h4>
        <table class="table table-bordered">
            <tr>
                <th>Sr No</th>
                <th>BE No.</th>
                <th>BE Dt.</th>
                <th>Port</th>
                <th>Quantity (KGS)</th>
                <th>Unit Price</th>
                <th>Value ($)</th>
                <th>Exc Rt.</th>
                <th>Value (INR)</th>
                <th colspan="2">Item Name</th>
                <th>Invoice</th>
                <th>DFIA No.</th>
                <th>DFIA Qty.</th>
                <th>DFIA INR</th>
                <th>DFIA $.</th>
            </tr>
            <tbody>
            {% for boe in data.list %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td>{{ boe.bill_of_entry_number }}</td>
                    <td>{{ boe.bill_of_entry_date }}</td>
                    <td>{{ boe.port }}</td>
                    <td>{{ boe.get_total_quantity }}</td>
                    <td>{{ boe.get_unit_price }}</td>
                    <td>{{ boe.get_total_fc }}</td>
                    <td>{{ boe.get_exchange_rate }}</td>
                    <td>{{ boe.get_total_inr }}</td>
                    <td colspan="2">{{ boe.product_name }}</td>
                    <td>{% if boe.invoice_no %}{{ boe.invoice_no }}{% else %}-{% endif %}</td>
                    <td colspan="4">
                        <table>
                            {% for boe_detail in boe.item_details.all %}
                                <tr>
                                    <td>{{ boe_detail.sr_number.license }}</td>
                                    <td>{{ boe_detail.qty }}</td>
                                    <td>{{ boe_detail.cif_inr }}</td>
                                    <td>{{ boe_detail.cif_fc }}</td>
                                </tr>
                            {% endfor %}
                            <tr>
                                <td><b>Total</b></td>
                                <td>{{ boe.get_total_quantity }}</td>
                                <td>{{ boe.get_total_inr }}</td>
                                <td>{{ boe.get_total_fc }}</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            {% endfor %}
            <tr>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td><b>Total</b></td>
                <td><b>{% get_boe_total_quantity data.list %}</b></td>
                <td>-</td>
                <td><b>{% get_boe_total_inr data.list %}</b></td>
                <td>-</td>
                <td><b>{% get_boe_total_fc data.list %}</b></td>
                <td colspan="2">-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
            </tr>
            </tbody>
        </table>
    {% endfor %}


{% endblock %}